<section>
    <!-- 
        HEADER CALENDAR
        JUST INFORMATIONS ABOUT THE MONTH AND THE YEAR
    -->
    <div class="header-calendar">
        <div>
            <button (click)="changeMonth(-1)" class="regular-text">
                <i class="pi pi-angle-left"></i>
                {{translateMonth(currentDate.getMonth()-1)}}
            </button>
        </div>
        <div class="title">
            <h5>{{translateMonth(currentDate.getMonth())}}</h5>
            <div>
                <fa-icon (click)="toggleCharts()" [icon]="faToggleOn" *ngIf="toggle"></fa-icon>
                <fa-icon (click)="toggleCharts()" [icon]="faToggleOff" *ngIf="!toggle"></fa-icon>
                <p class="medium-text">Mostrar Tarefas</p>
            </div>
        </div>
        <div class="flex justify-end regular-text">
            <button (click)="changeMonth(+1)">
                {{translateMonth(currentDate.getMonth()+1)}}
                <i class="pi pi-angle-right"></i>
            </button>
        </div>
    </div>

    <div class="calendar">

        <!-- 
            WRITTEN DAYS OF THE WEEK
        -->
        <div class="calendar-rows">
            <ng-container *ngFor="let day of calendarDays; index as index">
                <div *ngIf="index < 7" class="days-of-week large-text">
                    {{translateDayOfWeek(day.getDay())}}
                </div>
            </ng-container>
        </div>


        <div class="calendar-rows" *ngFor="let week of groupCalendarDays()">
            <div *ngFor="let day of week; index as index" class="calendar-day" (click)="newTaskOnDay(day)"
                [class.day-not-month]="currentDate.getMonth() !== day.getMonth()">
                <!-- 
                    DAYS OF THE MONTH (NUMBER)
                -->
                <div class="day-informations">

                    <!-- FUTURE -->
                    <div *ngIf="day == buttonDay">
                        +
                    </div>



                    <div [class.today]="today(day)">
                        {{day | date : 'dd'}}
                    </div>
                </div>


                <div class="tasks-informations" *ngIf="getTasksByDate(day).length > 0 && !toggle">
                    <div class="tasks-link-informations regular-text" (click)="openModalTasks(day)">
                        <p>{{getTasksByDate(day).length}} tarefas atribuídas</p>
                        <i class="pi pi-external-link"></i>
                    </div>
                </div>


                <div class="tasks-list-in-calendar" *ngIf="toggle">
                    <ng-container *ngFor="let task of getTasksByDate(day);">
                        <div>
                            <app-card (openTaskDetails)="openCardTask(task)" [minHeight]="'60px'" [width]="'210px'" [task]="task" cdkDrag
                                [borderColor]="getColor(task)" (deleteTask)="deleteTask(task)"></app-card>
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</section>

<app-modal-warn *ngIf="modalTasks" [height]="'650px'" [width]="'600px'" (close)="openModalTasks(null)">
    <h6>Tarefas Atribuídas para {{formatDate(modalDate)}}</h6>
    <div class="div-tasks">
        <ng-container *ngFor="let task of getTasksByDate(modalDate)">
            <div class="card-task">
                <p class="medium-text">{{task.name}}</p>
                <i class="pi pi-external-link"></i>
            </div>
        </ng-container>
    </div>
</app-modal-warn>